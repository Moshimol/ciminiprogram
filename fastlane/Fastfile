lane :release_pod do |options|
  #fastlane release_pod target_version:0.1.6 target_project:CIMiniProgram target_repo:https://gitlab.oneitfarm.com/basemodule-ios/cibasemodulespec.git
  
  # éœ€è¦æ·»åŠ çš„tagå€¼ 
  target_version = options[:target_version]

  # ç›®æ ‡çš„é¡¹ç›®
  target_project = options[:target_project] || 'CIMiniProgram.podspec'
  
  # ç›®æ ‡çš„repo
  target_repo  = options[:target_repo] || 'https://gitlab.oneitfarm.com/basemodule-ios/cibasemodulespec.git'

  UI.message("target_version = #{target_version}  target_project æ˜¯#{target_project} target_repoæ˜¯#{target_repo} ğŸš€ï¼Œå¼€å§‹å‘åŒ…")
  
  spec_path = "#{target_project}.podspec"
  # git pull
  git_pull 
  # ç¡®è®¤æ˜¯ master åˆ†æ”¯
  ensure_git_branch
  # ä¿®æ”¹ spec ä¸ºå³å°†å‘å¸ƒçš„ç‰ˆæœ¬
  version_bump_podspec(path: spec_path, version_number: target_version)
  # æäº¤ä»£ç åˆ°è¿œç¨‹ä»“åº“
  git_add(path: '.')
  git_commit(path: '.', message: 'release pod ç‰ˆæœ¬')

  push_to_git_remote
  # æ£€æŸ¥å¯¹äº tag æ˜¯å¦å·²ç»å­˜åœ¨
  if git_tag_exists(tag: target_version)
      # åˆ é™¤å¯¹åº” tag
      remove_git_tag(tag: target_version)
  end
  # æ·»åŠ  tag
  add_git_tag(tag: target_version)
  # æäº¤ tag
  push_git_tags
  # éªŒè¯ spec æ–‡ä»¶
  pod_lib_lint(verbose: true, allow_warnings: true)
  # # pod trunk push 'spec_path'
  # pod_push(path: spec_path, allow_warnings: true,verbose: true)
    # æ£€æŸ¥æ˜¯å¦ä¼ äº† repo å‚æ•°
  if target_repo
    # pod repo push 'target_repo' 'spec_path'
    pod_push(path: spec_path, repo: target_repo, allow_warnings: true, verbose: true)
  else
    # pod trunk push 'spec_path'
    pod_push(path: spec_path, allow_warnings: true, verbose: true)
  end
  
end